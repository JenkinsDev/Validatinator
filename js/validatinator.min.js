/*
 * Validatinator 
 * Simple yet effective vanilla JavaScript front-end validation add-on.
 * 01/10/2014
 */
 (function(window, undefined) {function Validatinator(a){this.validationInformation=void 0!==a?this.utils.convertFieldValidationsToArray(a):{},this.errors={},this.currentForm,this.currentField,this.validations.parent=this,this.validations.utils=this.utils}Validatinator.prototype={fails:function(a){return this.startValidations(a)},passes:function(a){return this.startValidations(a)},startValidations:function(a){var b,c,d,e=0;this.currentForm=a;for(fieldName in this.validationInformation[a])for(b=this.validationInformation[a][fieldName],this.currentField=fieldName;e<b.length;e++){var f,g=[];return d=this.getValidationMethodAndParameters(b[e]),c=this.getCurrentFieldsValue(),f=d[0],2===d.length&&(g=d[1]),this.callValidationMethodWithParameters(f,g,c)}},getValidationMethodAndParameters:function(a){var b,c;return a.contains(":")?(b=a.split(":"),c=b.shift(),[c,this.prepareParameters(b)]):[a]},prepareParameters:function(a){for(var b=0,c=0;b<a.length;b++)if(a[b].contains(","))for(a[b]=a[b].split(",");c<a[b].length;c++)a[b][c]=this.utils.convertStringToBoolean(a[b][c].trim());else a[b]=this.utils.convertStringToBoolean(a[b].trim());return a},getCurrentFieldsValue:function(){var a,b;for(a=document.getElementsByName(this.currentField),i=0;i<a.length;i++)if(fieldElement=a[i],fieldElement.form.name===this.currentForm){b=fieldElement.value;break}if(!b&&""!==b)throw new Error("Couldn't find the field element, "+this.currentField+", for the form, "+this.currentForm+".");return b},callValidationMethodWithParameters:function(a,b,c){if(!(a in this.validations))throw new Error("Validation does not exist: "+a);return b?(b.unshift(c),this.validations[a].apply(this.validations,b)):this.validations[a](c)},validationMessages:{accepted:"This field must be accepted.",alpha:"This field only allows alpha characters.",alphaDash:"This field only allows alpha, dash and underscore characters.",alphaNum:"This field only allows alpha, dash, underscore and numerical characters.",between:"This field must be between {min} and {max}.",confirmed:"This field must be the same as {confirmedField}.",contains:"This field must be one of the following values, {containsArray}.",different:"This field must not be the same as {differentValue}.",digitsLength:"This field must be a numerical values and {length} characters long.",digitsLengthBetween:"This field must be between {minLength} and {maxLength}.",email:"This field only allows valid email addresses.",ipvFour:"This field only allows valid ipv4 addresses.",max:"This field must only be {max} long or a numerical value must be less than or equal to {max}.",min:"This field must be at least {min} long or a numerical value must be greater than or equal to {min}.",notIn:"This field must not be contained within the following values, {notInArray}.",number:"This field only allows valid numerical values.",required:"This field is required.",same:"This field must be the same value as {sameValue}.",url:"This field only allows valid urls."},addValidationErrorMessage:function(a){this.errors.hasOwnProperty(this.currentForm)||(this.errors[this.currentForm]={}),this.errors[this.currentForm].hasOwnProperty(this.currentField)||(this.errors[this.currentForm][this.currentField]={}),this.errors[this.currentForm][this.currentField][a]=this.validationMessages[a]}},"object"==typeof window&&"object"==typeof window.document&&(window.Validatinator=Validatinator),String.prototype.contains||(String.prototype.contains=function(a,b){return-1!==String.prototype.indexOf.call(this,a,b)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),Validatinator.prototype.utils={convertFieldValidationsToArray:function(a){var b;for(formName in a)for(fieldName in a[formName])b=a[formName][fieldName],a[formName][fieldName]=b.contains("|")?b.split("|"):[b];return a},convertStringToBoolean:function(a){return"string"!=typeof a?a:"false"===a.toLowerCase()?!1:"true"===a.toLowerCase()?!0:a},isValueFalsyInNature:function(a,b){return(void 0===b||null===b)&&(b=!0),void 0===a||null===a||""===a?!0:b?!a:a===!1}},Validatinator.prototype.validations={accepted:function(a){return this.utils.isValueFalsyInNature(a)?!1:(a="string"==typeof a?a.toLowerCase():a,"yes"===a||"on"===a||a)},alpha:function(a){var b=/^[a-zA-Z]+$/;return this.utils.isValueFalsyInNature(a)?!1:b.test(a)},alphaDash:function(a){var b=/^[a-zA-Z-_]+$/;return this.utils.isValueFalsyInNature(a)?!1:b.test(a)},alphaNum:function(a){var b=/^[a-zA-Z-_0-9]+$/;return this.utils.isValueFalsyInNature(a)?!1:b.test(a)},between:function(a,b,c){var d=typeof a;if(b=Number(b),c=Number(c),isNaN(b)||isNaN(c))throw new Error("min and max must both be numbers in the `between` validation.");return"number"===d?a>=b&&c>=a:"string"===d?b<=a.length&&a.length<=c:!1},confirmed:function(a,b,c){return(void 0===c||null===c)&&(c=!0),a=String(a),b=String(b),c?a===b:a.toLowerCase()===b.toLowerCase()},contains:function(a,b){return-1!==b.indexOf(a)},different:function(a,b,c){return!this.confirmed(a,b,c)},digitsLength:function(a,b){if(b=Number(b),!b||isNaN(b))throw new Error("length must be of numerical value in the `digitsLength` validation.");return a=Number(a),isNaN(a)?!1:String(a).length===b},digitsLengthBetween:function(a,b,c){if(b=Number(b),c=Number(c),this.utils.isValueFalsyInNature(b)||this.utils.isValueFalsyInNature(c)||isNaN(b)||isNaN(c))throw new Error("minLength and maxLength must both be numerical values in the `digitsLengthBetween` validation.");return a=Number(a),0/0===a?!1:(fieldValueLength=String(a).length,fieldValueLength>=b&&c>=fieldValueLength)},email:function(a){var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,10})+$/;return b.test(a)},ipvFour:function(a){var b,c=255;return b=a.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/),null!=b&&b[1]<=c&&b[2]<=c&&b[3]<=c&&b[4]<=c},max:function(a,b){var c=typeof a;if(b=Number(b),this.utils.isValueFalsyInNature(b)||isNaN(b))throw new Error("max must be of numerical value in the `max` validation.");return this.utils.isValueFalsyInNature(a,!1)?!1:"number"===c?b>=a:"string"===c?a.length<=b:!1},min:function(a,b){var c=typeof a;if(b=Number(b),this.utils.isValueFalsyInNature(b)||isNaN(b))throw new Error("min must be of numerical value in the `min` validation.");return this.utils.isValueFalsyInNature(a,!1)?!1:"number"===c?a>=b:"string"===c?a.length>=b:!1},notIn:function(a,b){return!this.contains(a,b)},number:function(a){return a=Number(a),!isNaN(a)},required:function(a){return!this.utils.isValueFalsyInNature(a,!1)},same:function(a,b,c){return!this.different(a,b,c)},url:function(a){var b=/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/;return b.test(a)}};})(window);